<!DOCTYPE html>
<html lang="ko" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í‘ì ì „í™˜ì„ ìœ„í•œ ì¸í„°ë™í‹°ë¸Œ ì „ëµ ëŒ€ì‹œë³´ë“œ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: #F7F3E3;
            color: #262423;
        }
        .chart-container {
            position: relative;
            width: 100%;
            height: 96;
            max-height: 400px;
            background-color: #FFFFFF;
            padding: 1.5rem;
            border-radius: 0.75rem;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
        }
        .nav-link {
            transition: color 0.3s;
        }
        .nav-link.active {
            color: #B1A08D;
            font-weight: 700;
        }
        .kpi-card {
            background-color: #ffffff;
            border-radius: 0.75rem;
            padding: 2rem;
            text-align: center;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
        }
        .kpi-value {
            font-size: 3rem;
            font-weight: 900;
        }
        .kpi-label {
            font-size: 1rem;
            font-weight: 500;
            color: #544E49;
            margin-top: 0.5rem;
        }
        .timeline {
            position: relative;
            padding-left: 2.5rem;
            border-left: 3px solid #E2D5B6;
        }
        .timeline-item {
            position: relative;
            margin-bottom: 2.5rem;
        }
        .timeline-item:last-child {
            margin-bottom: 0;
        }
        .timeline-dot {
            position: absolute;
            left: -3.2rem;
            top: 0.25rem;
            height: 1.25rem;
            width: 1.25rem;
            background-color: #B1A08D;
            border-radius: 50%;
            border: 3px solid #F7F3E3;
        }
        .risk-card {
            background-color: #FFF8E7;
            border-left: 4px solid #FFC107;
        }
        .custom-table {
            width: 100%;
            text-align: left;
            border-collapse: collapse;
        }
        .custom-table th, .custom-table td {
            padding: 0.75rem 1rem;
            border-bottom: 1px solid #E2D5B6;
            font-size: 0.875rem;
            vertical-align: middle;
        }
        .custom-table th {
            font-weight: 700;
            color: #544E49;
        }
        .custom-table tr:last-child th, .custom-table tr:last-child td {
            border-bottom: none;
        }
        .profit-rate {
            color: #5cb85c;
            font-weight: bold;
        }
        .loss-rate {
            color: #d9534f;
            font-weight: bold;
        }
        .highlight-col {
            background-color: #F7F3E3;
            font-weight: 700;
        }
        .simulation-table td {
           padding: 0.5rem;
           border-bottom: 1px solid #E2D5B6;
        }
        .promo-chart-canvas {
            cursor: pointer;
        }
        .interactive-chart-canvas {
            cursor: pointer;
        }
        .tab-button {
            padding: 0.5rem 1rem;
            border-radius: 9999px;
            font-weight: 500;
            transition: all 0.3s;
            border: 2px solid transparent;
        }
        .tab-button.active {
            background-color: #B1A08D;
            color: white;
        }
        .tab-button:not(.active) {
            background-color: #FFFFFF;
            color: #544E49;
        }
        .quantity-input {
            width: 60px;
            text-align: center;
            border: 1px solid #E2D5B6;
            border-radius: 0.25rem;
            padding: 0.25rem;
        }
    </style>
</head>
<body class="antialiased">

    <nav class="bg-white/80 backdrop-blur-md sticky top-0 z-50 shadow-sm">
        <div class="container mx-auto px-4">
            <div class="flex justify-center items-center h-16">
                <div class="flex space-x-6 md:space-x-10 text-sm md:text-base font-medium text-gray-600">
                    <a href="#diagnosis" class="nav-link">1. ê¸´ê¸‰ ì§„ë‹¨</a>
                    <a href="#solution" class="nav-link">2. ì „ëµ íƒìƒ‰</a>
                    <a href="#core-strategy" class="nav-link">3. í•µì‹¬ ì „ëµ</a>
                    <a href="#roadmap" class="nav-link">4. ì‹¤í–‰ ê³„íš</a>
                </div>
            </div>
        </div>
    </nav>

    <div class="container mx-auto p-4 md:p-8 max-w-6xl">

        <header class="text-center my-12 md:my-16">
            <h1 class="text-4xl md:text-5xl font-black text-[#262423] leading-tight">ê¸´ê¸‰ ê²½ì˜ ì§„ë‹¨ ë° í‘ì ì „í™˜ ì „ëµ</h1>
            <p class="text-lg text-gray-600 mt-4 max-w-3xl mx-auto">7ê°œì›” ì—°ì† ì ìë¼ëŠ” ìœ„ê¸° ìƒí™©ì„ ëª…í™•íˆ ì§„ë‹¨í•˜ê³ , ë°ì´í„°ì— ê¸°ë°˜í•œ í”„ë¡œëª¨ì…˜ ë° ë©¤ë²„ì‹­ ì „ëµì„ í†µí•´ ì§€ì† ê°€ëŠ¥í•œ ì„±ì¥ ëª¨ë¸ì„ êµ¬ì¶•í•©ë‹ˆë‹¤.</p>
        </header>

        <section id="diagnosis" class="mb-16 md:mb-24 scroll-mt-24">
            <h2 class="text-3xl font-bold text-center mb-4">1. ê¸´ê¸‰ ì§„ë‹¨: ìš°ë¦¬ëŠ” ì–´ë””ì— ì„œ ìˆëŠ”ê°€?</h2>
            <p class="text-center text-gray-600 max-w-3xl mx-auto mb-12">ì§€ë‚œ 8ê°œì›”ê°„ ë§¤ì¶œì€ ì§€ì†ì ìœ¼ë¡œ í•˜ë½í•˜ë©° ì ì í­ì´ ì‹¬í™”ë˜ì—ˆìŠµë‹ˆë‹¤. ì•„ë˜ ì°¨íŠ¸ì˜ **êµµì€ ê°ˆìƒ‰ì„ ì€ ì´ìµê³¼ ì†ì‹¤ì„ ê°€ë¥´ëŠ” '0ì› ê¸°ì¤€ì„ '**ì´ë©°, **ê²€ì€ ì ì„ ì€ ë§¤ì›” ë‹¬ì„±í•´ì•¼ í–ˆë˜ ì†ìµë¶„ê¸°ì (BEP) ëª©í‘œ**ì…ë‹ˆë‹¤. ì‹¤ì œ ë§¤ì¶œ(íŒŒë€ìƒ‰ ì„ )ì´ ëª©í‘œì„ ì„ í¬ê²Œ ë°‘ëŒë©°, ìˆœì´ìµ(ë¶‰ì€ìƒ‰ ì„ )ì´ ì ì ì˜ì—­ì— ë¨¸ë¬´ëŠ” ê²ƒì„ í†µí•´ ìœ„ê¸°ì˜ ì‹¬ê°ì„±ì„ í•œëˆˆì— íŒŒì•…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8">
                <div class="kpi-card">
                    <div class="kpi-value text-red-600">(Â¥715,204)</div>
                    <div class="kpi-label">ëˆ„ì  ìˆœì†ì‹¤ (8ê°œì›”)</div>
                </div>
                <div class="kpi-card">
                    <div id="bep-rate-value" class="kpi-value text-red-600">52.7%</div>
                    <div id="bep-rate-label" class="kpi-label">4ì›”, ëª©í‘œ(BEP) ëŒ€ë¹„ ë§¤ì¶œ ë‹¬ì„±ë¥ </div>
                </div>
            </div>
            
            <div class="grid grid-cols-1">
                <div class="chart-container h-96">
                    <canvas id="salesProfitChart" class="interactive-chart-canvas"></canvas>
                </div>
                 <p class="text-center text-sm text-gray-500 mt-2">ğŸ’¡ ìœ„ ì°¨íŠ¸ì˜ íŒŒë€ìƒ‰ ë§‰ëŒ€ë¥¼ í´ë¦­í•˜ì—¬ ì›”ë³„ ëª©í‘œ ë‹¬ì„±ë¥ ì„ í™•ì¸í•´ ë³´ì„¸ìš”.</p>
            </div>
        </section>

        <section id="solution" class="mb-16 md:mb-24 scroll-mt-24">
            <h2 class="text-3xl font-bold text-center mb-4">2. ì „ëµ íƒìƒ‰: ì–´ë–¤ í”„ë¡œëª¨ì…˜ì´ 'ì§„ì§œ ì´ìµ'ì„ ë‚¨ê¸°ëŠ”ê°€?</h2>
            <p class="text-center text-gray-600 max-w-3xl mx-auto mb-12">ëª¨ë“  í”„ë¡œëª¨ì…˜ì€ ëª©ì ì´ ë‹¤ë¦…ë‹ˆë‹¤. ì•„ë˜ì—ì„œ ì›í•˜ëŠ” **'ì „ëµ ëª©í‘œ'**ë¥¼ ì„ íƒí•˜ì—¬, ê° ëª©í‘œì— íŠ¹í™”ëœ í”„ë¡œëª¨ì…˜ì˜ ë‚´ìš©ê³¼ ìˆ˜ìµì„±ì„ ì§ì ‘ ë¹„êµí•˜ê³  ìµœì ì˜ ì¡°í•©ì„ ì°¾ì•„ë³´ì‹­ì‹œì˜¤.</p>
            
            <div class="bg-white rounded-xl shadow-lg p-6 md:p-8">
                <div id="promo-tabs" class="flex justify-center items-center space-x-2 md:space-x-4 mb-8">
                    <button class="tab-button" data-goal="acquisition">ê³ ê° ìœ ì… (ì¶©ê²© ìš”ë²•)</button>
                    <button class="tab-button" data-goal="profitability">ìˆ˜ìµì„± ê°œì„  (ì²´ì§ˆ ê°œì„ )</button>
                    <button class="tab-button" data-goal="loyalty">ê³ ê° ë½ì¸ (ë‹¨ê³¨ í™•ë³´)</button>
                </div>
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <div id="promo-details" class="flex flex-col justify-center">
                    </div>
                    <div class="min-h-[350px] md:min-h-[400px]">
                        <canvas id="promoChart" class="promo-chart-canvas"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <section id="core-strategy" class="mb-16 md:mb-24 scroll-mt-24">
             <h2 class="text-3xl font-bold text-center mb-4">3. í•µì‹¬ ì „ëµ: ì¶©ì „ì‹ ë©¤ë²„ì‹­ ì™„ì „ ë¶„ì„</h2>
            <p class="text-center text-gray-600 max-w-3xl mx-auto mb-12">ìœ„ê¸° ê·¹ë³µì˜ ê°€ì¥ ê°•ë ¥í•œ ë¬´ê¸°ëŠ” 'ì¶©ì „ì‹ ë©¤ë²„ì‹­'ì…ë‹ˆë‹¤. ì•„ë˜ ì‹œë®¬ë ˆì´í„°ë¥¼ í†µí•´ ê° ë“±ê¸‰ë³„ íŒë§¤ ìˆ˜ëŸ‰ì„ ì§ì ‘ ì¡°ì ˆí•˜ë©°, ëª©í‘œ ë‹¬ì„±ì„ ìœ„í•œ ìµœì ì˜ íŒë§¤ ì¡°í•©ì„ ì°¾ì•„ë³´ì‹­ì‹œì˜¤.</p>

            <div class="bg-white rounded-xl shadow-lg p-6 md:p-8 mb-8">
                <h3 class="text-xl font-bold mb-6 text-center">ë©¤ë²„ì‹­ íŒë§¤ ê³„íš ì‹œë®¬ë ˆì´í„°</h3>
                <div class="grid grid-cols-1 xl:grid-cols-5 gap-8">
                    <div class="xl:col-span-3 overflow-x-auto">
                         <table id="membership-table" class="custom-table">
                            <thead>
                                <tr>
                                    <th>ë“±ê¸‰</th>
                                    <th>íŒë§¤ê°€</th>
                                    <th>ë³´ë„ˆìŠ¤ í˜œíƒ</th>
                                    <th>ê±´ë‹¹ ì´ìµ(ë¥ )</th>
                                    <th class="highlight-col">íŒë§¤ ìˆ˜ëŸ‰</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>VVIP (íŒŒíŠ¸ë„ˆ)</td>
                                    <td>Â¥1,000</td>
                                    <td>+Â¥500 (50%)</td>
                                    <td>Â¥644.5 <span class="profit-rate">(64.5%)</span></td>
                                    <td class="highlight-col"><input class="quantity-input" type="number" id="q-vvip" value="50" min="0"></td>
                                </tr>
                                 <tr>
                                    <td>VIP (ê³¨ë“œ)</td>
                                    <td>Â¥500</td>
                                    <td>+Â¥150 (30%)</td>
                                    <td>Â¥346.0 <span class="profit-rate">(69.2%)</span></td>
                                    <td class="highlight-col"><input class="quantity-input" type="number" id="q-vip" value="100" min="0"></td>
                                </tr>
                                 <tr>
                                    <td>Family (ì‹¤ë²„)</td>
                                    <td>Â¥300</td>
                                    <td>+Â¥60 (20%)</td>
                                    <td>Â¥214.7 <span class="profit-rate">(71.6%)</span></td>
                                    <td class="highlight-col"><input class="quantity-input" type="number" id="q-family" value="250" min="0"></td>
                                </tr>
                                 <tr>
                                    <td>Welcome (ë¸Œë¡ ì¦ˆ)</td>
                                    <td>Â¥100</td>
                                    <td>+Â¥10 (10%)</td>
                                    <td>Â¥73.9 <span class="profit-rate">(73.9%)</span></td>
                                    <td class="highlight-col"><input class="quantity-input" type="number" id="q-welcome" value="400" min="0"></td>
                                </tr>
                            </tbody>
                        </table>
                         <div class="grid grid-cols-2 gap-4 mt-4 bg-gray-50 p-4 rounded-lg">
                            <div class="text-center">
                                <div class="text-sm text-gray-500">ì´ íŒë§¤ ìˆ˜ëŸ‰</div>
                                <div id="total-quantity" class="text-2xl font-bold">800ì¥</div>
                            </div>
                            <div class="text-center">
                                <div class="text-sm text-gray-500">ì´ í˜„ê¸ˆ ìœ ì…</div>
                                <div id="total-cash" class="text-2xl font-bold">Â¥215,000</div>
                            </div>
                             <div class="text-center col-span-2 mt-2">
                                <div class="text-sm text-gray-500">ì´ ì˜ˆìƒ ì´ìµ</div>
                                <div id="total-profit" class="text-3xl font-bold text-green-600">Â¥150,062</div>
                            </div>
                        </div>
                    </div>
                    <div class="xl:col-span-2 chart-container h-96">
                        <canvas id="membershipChart"></canvas>
                        <p class="text-center text-xs text-gray-500 mt-2">ë“±ê¸‰ë³„ ì´ ì˜ˆìƒ ì´ìµ ê¸°ì—¬ë„</p>
                    </div>
                </div>
            </div>
            
            <div class="risk-card rounded-lg p-6 md:p-8">
                 <h3 class="text-xl font-bold mb-4 text-[#C77700]">âš ï¸ ì™•í™(ç½‘çº¢) ë§ˆì¼€íŒ… ìˆ˜ìˆ˜ë£Œ ì‹œë®¬ë ˆì´í„°</h3>
                <p class="text-gray-700 text-sm mb-4">ì™•í™ì—ê²Œ ì§€ê¸‰í•˜ëŠ” ìˆ˜ìˆ˜ë£ŒëŠ” ì „ì²´ ë©¤ë²„ì‹­ ìˆ˜ìµì„±ì— ì§ì ‘ì ì¸ ì˜í–¥ì„ ë¯¸ì¹©ë‹ˆë‹¤. ì•„ë˜ ìŠ¬ë¼ì´ë”ë¥¼ ì›€ì§ì—¬ ìˆ˜ìˆ˜ë£Œìœ¨(0%~30%)ì— ë”°ë¥¸ ìµœì¢… ìˆ˜ìµë¥  ë³€í™”ë¥¼ ì§ì ‘ ì‹œë®¬ë ˆì´ì…˜í•˜ê³  ìµœì ì˜ ì •ì±…ì„ ê²°ì •í•˜ì‹­ì‹œì˜¤.</p>
                <div class="mb-6">
                    <label for="commission-slider" class="block text-sm font-bold mb-2">ì™•í™ íŒë§¤ ìˆ˜ìˆ˜ë£Œìœ¨: <span id="commission-value" class="text-lg font-black text-[#B1A08D]">15%</span></label>
                    <input id="commission-slider" type="range" min="0" max="30" value="15" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-[#B1A08D]">
                </div>
                <div class="overflow-x-auto bg-white/50 rounded-md">
                    <table class="custom-table w-full">
                        <thead>
                             <tr>
                                <th>ë“±ê¸‰</th>
                                <th>íŒë§¤ê°€</th>
                                <th>ìˆ˜ìˆ˜ë£Œ</th>
                                <th>ìµœì¢… ì´ìµ</th>
                                <th>ìµœì¢… ìˆ˜ìµë¥ </th>
                            </tr>
                        </thead>
                        <tbody id="commission-table-body">
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <section id="roadmap" class="scroll-mt-24">
            <h2 class="text-3xl font-bold text-center mb-12">4. ì‹¤í–‰ ê³„íš: í‘ì ì „í™˜ì„ ìœ„í•œ 3ë‹¨ê³„ ë¡œë“œë§µ</h2>
            <div class="timeline max-w-3xl mx-auto">
                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <h3 class="text-xl font-bold text-[#544E49] mb-2">Phase 1: ì´ë ¥ í™ë³´ ë° ê³ ê° ì¬ìœ ì… (D-7 ~ D+7)</h3>
                    <p class="text-gray-600">ë§¤ì¥ì´ ìƒˆë¡œì›Œì¡ŒìŒì„ ê°ì¸ì‹œí‚¤ê³  ë– ë‚˜ê°„ ê³ ê°ì˜ ë°œê¸¸ì„ ë˜ëŒë¦½ë‹ˆë‹¤. 'ìŒë£Œ 1+1 ì´ë²¤íŠ¸'ë¡œ ì´ìŠˆë¥¼ ë§Œë“¤ê³ , 'SNS ì¸ì¦' ë° 'ì¹œêµ¬ ì¶”ì²œ ì¿ í°'ìœ¼ë¡œ ë°”ì´ëŸ´ì„ ìœ ë„í•˜ë©°, 'ì¶©ì „ì‹ ë©¤ë²„ì‹­ ì¹´ë“œ' íŒë§¤ë¥¼ ê°œì‹œí•˜ì—¬ ì´ˆê¸° ìš´ì˜ ìê¸ˆì„ í™•ë³´í•©ë‹ˆë‹¤.</p>
                </div>
                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <h3 class="text-xl font-bold text-[#544E49] mb-2">Phase 2: ê°€ì¹˜ ì „í™˜ ë° ìˆ˜ìµí™” (Week 2 ~ Week 4)</h3>
                    <p class="text-gray-600">ìœ ì…ëœ ê³ ê°ì„ ìˆ˜ìµìœ¼ë¡œ ì „í™˜ì‹œí‚µë‹ˆë‹¤. 'ìˆ˜ìµì„± ë†’ì€ ì„¸íŠ¸ ë©”ë‰´'ì™€ 'ì‹œê°„ëŒ€ë³„ í• ì¸'ì„ í†µí•´ ê°ë‹¨ê°€ë¥¼ ë†’ì´ê³  ë¸ŒëŸ°ì¹˜ ë§¤ì¥ìœ¼ë¡œì˜ ì´ë¯¸ì§€ë¥¼ êµ³í™ë‹ˆë‹¤.</p>
                </div>
                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <h3 class="text-xl font-bold text-[#544E49] mb-2">Phase 3: ì¶©ì„± ê³ ê° í™•ë³´ ë° ì•ˆì •í™” (Month 2 ì´í›„)</h3>
                    <p class="text-gray-600">ë‹¨ê³¨ ê³ ê°ì„ 'ì°íŒ¬'ìœ¼ë¡œ ë§Œë“¤ì–´ ì•ˆì •ì ì¸ ë§¤ì¶œ êµ¬ì¡°ë¥¼ êµ¬ì¶•í•©ë‹ˆë‹¤. 'ê°œì„ ëœ ìŠ¤íƒ¬í”„ ì¹´ë“œ'ë¡œ ì¬ë°©ë¬¸ ë™ê¸°ë¥¼ ë¶€ì—¬í•˜ê³ , 'ê¸°ì—…/í•™êµ ì œíœ´'ë¡œ ë‹¨ì²´ ê³ ê°ì„ í™•ë³´í•˜ë©°, 'ì›ë°ì´ í´ë˜ìŠ¤' ë“± íŠ¹ë³„í•œ ë¸Œëœë“œ ê²½í—˜ì„ ì œê³µí•©ë‹ˆë‹¤.</p>
                </div>
            </div>
        </section>

    </div>

    <footer class="text-center my-12">
        <p class="text-sm text-gray-500">2025. 6. 22. ê²½ì˜ ì „ëµ ë¶„ì„íŒ€</p>
    </footer>

    <script>
        const FONT_COLOR = '#262423';
        const GRID_COLOR = '#E2D5B6';
        const PALETTE = {
            dark: '#262423',
            brown: '#544E49',
            lightBrown: '#B1A08D',
            beige: '#E2D5B6',
            cream: '#F7F3E3',
        };
        const ACCENT_PALETTE = {
            red: '#d9534f',
            green: '#5cb85c',
            blue: '#428bca',
            yellow: '#f0ad4e',
            orange: '#e67e22'
        };
        
        const defaultTooltipOptions = {
            plugins: {
                tooltip: {
                    callbacks: {
                        title: function(tooltipItems) {
                            const item = tooltipItems[0];
                            let label = item.chart.data.labels[item.dataIndex];
                            if (Array.isArray(label)) {
                              return label.join(' ');
                            }
                            return label;
                        }
                    }
                }
            }
        };

        const salesProfitCtx = document.getElementById('salesProfitChart').getContext('2d');
        const bepLineData = Array(8).fill(398575);
        const salesData = [633736, 366290, 267209, 252095, 252654, 234256, 210175, 191181];

        const salesProfitChart = new Chart(salesProfitCtx, {
            type: 'bar',
            data: {
                labels: ['10ì›”', '11ì›”', '12ì›”', '1ì›”', '2ì›”', '3ì›”', '4ì›”', '5ì›”'],
                datasets: [
                {
                    label: 'íŒë§¤ì•¡',
                    data: salesData,
                    backgroundColor: ACCENT_PALETTE.blue,
                    borderColor: ACCENT_PALETTE.blue,
                    yAxisID: 'ySales',
                    order: 2,
                }, 
                {
                    label: 'ìˆœì´ìµ (ì ì)',
                    data: [36598, -72283, -153609, -63098, -93029, -103510, -80581, -104671],
                    borderColor: ACCENT_PALETTE.red,
                    backgroundColor: 'rgba(217, 83, 79, 0.1)',
                    type: 'line',
                    fill: true,
                    tension: 0.3,
                    yAxisID: 'yProfit',
                    order: 1
                },
                {
                    label: 'ì†ìµë¶„ê¸°ì (BEP) ëª©í‘œ',
                    data: bepLineData,
                    borderColor: PALETTE.dark,
                    borderDash: [5, 5],
                    fill: false,
                    pointRadius: 0,
                    type: 'line',
                    yAxisID: 'ySales',
                    order: 0
                }]
            },
            options: {
                ...defaultTooltipOptions,
                responsive: true,
                maintainAspectRatio: false,
                onClick: (event, elements) => {
                    if (elements.length > 0) {
                        const activeElement = elements[0];
                        if(activeElement.datasetIndex === 0) { // Only trigger on sales bars
                            const index = activeElement.index;
                            const monthLabel = salesProfitChart.data.labels[index];
                            const monthlySale = salesProfitChart.data.datasets[0].data[index];
                            const bepTarget = bepLineData[index];
                            const achievementRate = (monthlySale / bepTarget) * 100;
                            
                            document.getElementById('bep-rate-value').textContent = `${achievementRate.toFixed(1)}%`;
                            document.getElementById('bep-rate-label').textContent = `${monthLabel}, ëª©í‘œ(BEP) ëŒ€ë¹„ ë§¤ì¶œ ë‹¬ì„±ë¥ `;
                        }
                    }
                },
                plugins: { ...defaultTooltipOptions.plugins, legend: { position: 'top' } },
                scales: {
                    x: { grid: { display: false } },
                    ySales: {
                        type: 'linear',
                        position: 'left',
                        grid: { 
                            color: GRID_COLOR,
                            zeroLineColor: PALETTE.brown,
                            zeroLineWidth: 2
                        },
                        ticks: { callback: value => `Â¥${Math.round(value/10000)}ë§Œ` }
                    },
                    yProfit: {
                        type: 'linear',
                        position: 'right',
                        grid: { 
                            drawOnChartArea: false,
                        },
                         ticks: { callback: value => `Â¥${Math.round(value/10000)}ë§Œ` }
                    }
                }
            }
        });

        const promotionDataByGoal = {
            acquisition: [
                { name: 'ìŒë£Œ 1+1 ì´ë²¤íŠ¸', profit: 8.84, effect: 'ê°€ì¥ ê°•ë ¥í•œ ì´ˆê¸° ë°”ì´ëŸ´ ë° ì¬ë°©ë¬¸ ìœ ë„ íš¨ê³¼. "ê³µì§œ"ë¼ëŠ” ê°•ë ¥í•œ ì¸ì„¼í‹°ë¸Œ ì œê³µ.', risk: 'ìˆ˜ìµì„± ì•…í™”, ì²´ë¦¬í”¼ì»¤ ìœ ì…', recommendation: 'ì˜¤í”ˆ í›„ ì²« 7ì¼ê°„ ì§‘ì¤‘ ìš´ì˜í•˜ì—¬ ê³ ê° íŠ¸ë˜í”½ ê·¹ëŒ€í™”.', color: ACCENT_PALETTE.orange },
                { name: 'SNS ì¸ì¦ ì‹œ, ì‹œê·¸ë‹ˆì²˜ ì¦ì •', profit: -13.70, effect: 'ì‹ ë¢°ë„ ë†’ì€ ê´‘ê³  ì½˜í…ì¸  í™•ë³´', risk: 'ì›ê°€ ë¶€ë‹´, ì €ì¡°í•œ ì°¸ì—¬ìœ¨', recommendation: 'ìƒì‹œ ë³‘í–‰, ì›ê°€ ë†’ì€ ë©”ë‰´(ì ë´‰ëµˆë¥´) ì¦ì •ìœ¼ë¡œ ì°¸ì—¬ ê°€ì¹˜ ë†’ì„.', color: ACCENT_PALETTE.red },
                { name: 'â˜…ëŒë°œ ë½‘ê¸° ì´ë²¤íŠ¸', profit: -3.53, effect: 'ì¬ë¯¸ì™€ ê¸°ëŒ€ê°ìœ¼ë¡œ ìë°œì ì¸ ì¤„ì„œê¸° ë° ë°”ì´ëŸ´ ìœ ë„.', risk: 'ê²½í’ˆ ë¹„ìš© ë¶€ë‹´, ë‚®ì€ ë‹¹ì²¨ í™•ë¥ ë¡œ ì¸í•œ ê³ ê° ë¶ˆë§Œ.', recommendation: 'êµ¬ë§¤ ê³ ê° ëŒ€ìƒ, ì˜ìˆ˜ì¦ ë²ˆí˜¸ ì¶”ì²¨ ë˜ëŠ” ê°„ë‹¨í•œ ë½‘ê¸° ê¸°ê³„ ìš´ì˜. ê²½í’ˆì€ í• ì¸ê¶Œ, ë””ì €íŠ¸ ì¦ì • ë“± ë‹¤ì–‘í•˜ê²Œ êµ¬ì„±.', color: ACCENT_PALETTE.yellow }
            ],
            profitability: [
                { name: 'â˜…ìˆ˜ìµì„± ë†’ì€ ì„¸íŠ¸ ë©”ë‰´', profit: 17.42, effect: 'ê°ë‹¨ê°€ ìƒìŠ¹ ë° ìˆ˜ìµì„± ë°©ì–´. ê³ ê°ì—ê²Œ í• ì¸ í˜œíƒ ì œê³µ.', risk: 'ì¸ê¸° ì—†ëŠ” ì¡°í•©ì¼ ê²½ìš° íŒë§¤ ì €ì¡°', recommendation: 'POS ë°ì´í„° ê¸°ë°˜ìœ¼ë¡œ ì¸ê¸° ì¡°í•©(ì†Œê¸ˆë¹µ+ì•„ë©”ë¦¬ì¹´ë…¸ ë“±)ì„ ê°œë°œí•˜ì—¬ ìƒì‹œ ìš´ì˜.', color: ACCENT_PALETTE.green },
                { name: 'ì‹œê°„ëŒ€ë³„ íƒ€ê²Ÿ í• ì¸', profit: 'í• ì¸ìœ¨â†“', effect: 'ìœ íœ´ ì‹œê°„ëŒ€ ë§¤ì¶œ ì°½ì¶œ ë° ìš´ì˜ íš¨ìœ¨ ì¦ëŒ€', risk: 'ê³ ê°ë“¤ì´ í• ì¸ ì‹œê°„ë§Œ ê¸°ë‹¤ë¦¬ëŠ” ë¶€ì‘ìš©', recommendation: 'ì˜¤í›„ 2-5ì‹œ ë“± íŠ¹ì • ì‹œê°„ëŒ€ì— í•œì •í•˜ì—¬ ìš´ì˜.', color: ACCENT_PALETTE.blue },
            ],
            loyalty: [
                { name: 'â˜…ê°œì„ ëœ ìŠ¤íƒ¬í”„ ì¹´ë“œ', profit: 'ë†’ìŒ', effect: 'ë¹ ë¥¸ ë³´ìƒìœ¼ë¡œ ì¬ë°©ë¬¸ ë™ê¸° ê°•ë ¥ ë¶€ì—¬', risk: 'ë³µì¡í•œ ê´€ë¦¬, ì–´ë·°ì§• ê°€ëŠ¥ì„±', recommendation: '5íšŒ(ë² ì´ì»¤ë¦¬), 10íšŒ(ìŒë£Œ)ë¡œ ì¤‘ê°„ ëª©í‘œë¥¼ ì„¤ì •í•˜ì—¬ ê³ ê°ì˜ ì„±ì·¨ê° ìê·¹.', color: ACCENT_PALETTE.green },
                { name: 'â˜…ìš”ì¼ë³„ í•œì •íŒ ë©”ë‰´', profit: 25.18, effect: '"ì˜¤ëŠ˜ë§Œ êµ¬ë§¤ ê°€ëŠ¥"ì´ë¼ëŠ” í¬ì†Œì„±ìœ¼ë¡œ íŠ¹ì • ìš”ì¼ ì¬ë°©ë¬¸ ê°•ë ¥ ìœ ë„.', risk: 'í•´ë‹¹ ìš”ì¼ì—ë§Œ ê³ ê° í¸ì¤‘, ì¬ê³  ì˜ˆì¸¡ ì‹¤íŒ¨ ì‹œ ê³ ê° ë¶ˆë§Œ ë°œìƒ.', recommendation: 'ë§ˆì§„ ë†’ì€ ì‹œê·¸ë‹ˆì²˜ ë©”ë‰´ë¥¼ "ê¸ˆìš”ì¼ í•œì • 50ê°œ" ë“±ìœ¼ë¡œ íŒë§¤í•˜ì—¬ ì¶©ì„± ê³ ê° í™•ë³´.', color: ACCENT_PALETTE.orange },
                { name: 'ì¹œêµ¬ ì¶”ì²œ "ë”ë¸”ì—…" ì¿ í°', profit: -7.06, effect: 'ì €ë¹„ìš© ì‹ ê·œ ê³ ê° í™•ì¥', risk: 'ì–´ë·°ì§• ê°€ëŠ¥ì„±', recommendation: 'ì¶”ì²œì¸/í”¼ì¶”ì²œì¸ ëª¨ë‘ì—ê²Œ í˜œíƒ ì œê³µ.', color: ACCENT_PALETTE.red }
            ]
        };
        
        const promoDetailsContainer = document.getElementById('promo-details');
        const promoCtx = document.getElementById('promoChart').getContext('2d');
        let currentGoal = 'acquisition';

        const promoChart = new Chart(promoCtx, {
            type: 'bar',
            data: { labels: [], datasets: [{ data: [], backgroundColor: [] }] },
            options: {
                indexAxis: 'y',
                responsive: true,
                maintainAspectRatio: false,
                onClick: (event, elements) => {
                    if (elements.length > 0) {
                        const index = elements[0].index;
                        updatePromoDetails(index, currentGoal);
                    }
                },
                plugins: { legend: { display: false } },
                scales: {
                    x: { grid: { color: GRID_COLOR }, ticks: { callback: value => typeof value === 'number' ? `Â¥${value}`: value } },
                    y: { grid: { display: false }, ticks: { font: { size: 10 } } }
                }
            }
        });

        function updatePromoDetails(index, goalKey) {
            const promo = promotionDataByGoal[goalKey][index];
            let profitText = typeof promo.profit === 'number' ? `Â¥${promo.profit.toFixed(2)}` : promo.profit;
            
            promoDetailsContainer.innerHTML = `
                <h3 class="text-2xl font-bold mb-2" style="color: ${promo.color};">${promo.name}</h3>
                <dl class="text-sm">
                    <dt class="font-bold mt-4">ê¸°ëŒ€ íš¨ê³¼:</dt>
                    <dd class="text-gray-600">${promo.effect}</dd>
                    <dt class="font-bold mt-3">í•µì‹¬ ë¦¬ìŠ¤í¬:</dt>
                    <dd class="text-gray-600">${promo.risk}</dd>
                    <dt class="font-bold mt-3">ì¶”ì²œ ì‹¤í–‰ ë°©ì•ˆ:</dt>
                    <dd class="text-gray-600">${promo.recommendation}</dd>
                </dl>
                <div class="mt-auto pt-4 border-t border-gray-200 mt-4">
                    <div class="text-lg font-bold">ê±´ë‹¹ ê³µí—Œì´ìµ</div>
                    <div class="text-4xl font-black" style="color: ${promo.color};">${profitText}</div>
                </div>
            `;
        }

        function updateSectionForGoal(goalKey) {
            currentGoal = goalKey;
            const data = promotionDataByGoal[goalKey];
            
            promoChart.data.labels = data.map(p => p.name);
            promoChart.data.datasets[0].data = data.map(p => typeof p.profit === 'number' ? p.profit : 0);
            promoChart.data.datasets[0].backgroundColor = data.map(p => p.color);
            promoChart.update();
            
            updatePromoDetails(0, goalKey);
            
            document.querySelectorAll('.tab-button').forEach(btn => {
                btn.classList.remove('active');
                if (btn.dataset.goal === goalKey) {
                    btn.classList.add('active');
                }
            });
        }

        document.getElementById('promo-tabs').addEventListener('click', (e) => {
            if (e.target.classList.contains('tab-button')) {
                const goal = e.target.dataset.goal;
                updateSectionForGoal(goal);
            }
        });

        updateSectionForGoal('acquisition');

        const membershipCtx = document.getElementById('membershipChart').getContext('2d');
        const membershipTiersData = [
            { id: 'vvip', name: 'VVIP', price: 1000, profitPerCard: 644.5, color: ACCENT_PALETTE.green },
            { id: 'vip', name: 'VIP', price: 500, profitPerCard: 345.95, color: ACCENT_PALETTE.blue },
            { id: 'family', name: 'Family', price: 300, profitPerCard: 214.68, color: ACCENT_PALETTE.yellow },
            { id: 'welcome', name: 'Welcome', price: 100, profitPerCard: 73.93, color: ACCENT_PALETTE.orange }
        ];

        const membershipChart = new Chart(membershipCtx, {
            type: 'doughnut',
            data: {
                labels: membershipTiersData.map(t => t.name),
                datasets: [{
                    label: 'ì´ ì˜ˆìƒ ì´ìµ',
                    data: [],
                    backgroundColor: membershipTiersData.map(t => t.color),
                    borderColor: '#FFFFFF',
                    borderWidth: 2
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { position: 'top' },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                let label = context.label || '';
                                if (label) {
                                    label += ': ';
                                }
                                if (context.parsed !== null) {
                                    label += new Intl.NumberFormat('ko-KR', { style: 'currency', currency: 'CNY' }).format(context.parsed);
                                }
                                return label;
                            }
                        }
                    }
                }
            }
        });

        const quantityInputs = document.querySelectorAll('.quantity-input');

        function updateMembershipAnalysis() {
            let totalQuantity = 0;
            let totalCash = 0;
            let totalProfit = 0;
            const profitByTier = [];

            membershipTiersData.forEach(tier => {
                const quantityInput = document.getElementById(`q-${tier.id}`);
                const quantity = parseInt(quantityInput.value) || 0;
                
                totalQuantity += quantity;
                totalCash += quantity * tier.price;
                const tierProfit = quantity * tier.profitPerCard;
                totalProfit += tierProfit;
                profitByTier.push(tierProfit);
            });

            document.getElementById('total-quantity').textContent = `${totalQuantity}ì¥`;
            document.getElementById('total-cash').textContent = `Â¥${totalCash.toLocaleString()}`;
            document.getElementById('total-profit').textContent = `Â¥${totalProfit.toLocaleString(undefined, {minimumFractionDigits: 0, maximumFractionDigits: 0})}`;

            membershipChart.data.datasets[0].data = profitByTier;
            membershipChart.update();
        }
        
        quantityInputs.forEach(input => {
            input.addEventListener('input', updateMembershipAnalysis);
        });

        updateMembershipAnalysis();


        const commissionSlider = document.getElementById('commission-slider');
        const commissionValueSpan = document.getElementById('commission-value');
        const commissionTableBody = document.getElementById('commission-table-body');
        
        const commissionTiers = [
            { name: 'VVIP (íŒŒíŠ¸ë„ˆ)', price: 1000, cost: 355.5 },
            { name: 'VIP (ê³¨ë“œ)', price: 500, cost: 154.05 },
            { name: 'Family (ì‹¤ë²„)', price: 300, cost: 85.32 },
            { name: 'Welcome (ë¸Œë¡ ì¦ˆ)', price: 100, cost: 26.07 }
        ];

        function updateCommissionTable(rate) {
            commissionValueSpan.textContent = `${rate}%`;
            commissionTableBody.innerHTML = '';
            
            commissionTiers.forEach(tier => {
                const commission = tier.price * (rate / 100);
                const finalProfit = tier.price - tier.cost - commission;
                const finalProfitRate = (tier.price > 0) ? (finalProfit / tier.price) * 100 : 0;
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${tier.name}</td>
                    <td>Â¥${tier.price.toFixed(2)}</td>
                    <td>Â¥${commission.toFixed(2)}</td>
                    <td>Â¥${finalProfit.toFixed(2)}</td>
                    <td class="${finalProfitRate >= 0 ? 'profit-rate' : 'loss-rate'}">${finalProfitRate.toFixed(1)}%</td>
                `;`
                commissionTableBody.appendChild(row);
            });
        }

        commissionSlider.addEventListener('input', (event) => {
            updateCommissionTable(event.target.value);
        });

        updateCommissionTable(15);

        const sections = document.querySelectorAll('section');
        const navLinks = document.querySelectorAll('.nav-link');
        window.addEventListener('scroll', () => {
            let current = '';
            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                if (pageYOffset >= sectionTop - 100) {
                    current = section.getAttribute('id');
                }
            });

            navLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href').includes(current)) {
                    link.classList.add('active');
                }
            });
        });
    </script>

</body>
</html>
